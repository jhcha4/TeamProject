<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mappers.lshboard-mapper">

	<select id="list" resultType="LshBoardVo">
		select * from tbl_product_board
		<include refid="type"/>
		order by <include refid="price"/>p_num desc
	</select>
	
	<select id="single" resultType="LshBoardVo">
		select * from tbl_product_board
		where p_num = #{p_num}
	</select>
	
	<sql id="price">
		<if test="lshBoardDto.priceType != null">
			<choose>
				<when test='lshBoardDto.priceType == "H"'>
					p_price desc,
				</when>
				<when test='lshBoardDto.priceType == "L"'>
					p_price,
				</when>
			</choose>
		</if>
	</sql>
	
	<sql id="type">
		<if test="p_main != null">
			where p_main = #{p_main}
		</if>
		<if test="p_serve != null">
			where p_serve = #{p_serve}
		</if>
	</sql>
	
</mapper>
